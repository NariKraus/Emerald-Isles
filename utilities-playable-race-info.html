<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">

    <title>Emerald Isles - Race Info</title>
    <meta content="" name="description">
    <meta content="" name="keywords">

    <!-- Favicons -->
    <link href="assets/img/favicon.png" rel="icon">
    <link href="assets/img/apple-touch-icon.png" rel="apple-touch-icon">

    <!-- Vendor CSS Files -->
    <link href="assets/vendor/aos/aos.css" rel="stylesheet">
    <link href="assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link href="assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
    <link href="assets/vendor/boxicons/css/boxicons.min.css" rel="stylesheet">
    <link href="assets/vendor/glightbox/css/glightbox.min.css" rel="stylesheet">
    <link href="assets/vendor/swiper/swiper-bundle.min.css" rel="stylesheet">

    <!-- Main CSS File -->
    <link href="assets/css/style.css" rel="stylesheet">

</head>

<body>

    <!-- ======= Header ======= -->
    <header id="header" class="d-flex align-items-center">
    </header><!-- End Header -->

    <main id="main">

        <!-- ======= Breadcrumbs ======= -->
        <section id="breadcrumbs" class="breadcrumbs">
            <div class="container">

                <ol>
                    <li>Utilities</li>
                    <li><a href="utilities-playable-races.html">Races</a></li>
                    <li class="race-name">race</li>
                </ol>
                <h2 class="race-name">race</h2>

            </div>
        </section><!-- End Breadcrumbs -->

        <section data-aos="zoom out" data-aos-duration="250" class="races">
            <div class="container">

                <div class="row">

                </div>

            </div>
        </section>

    </main><!-- End #main -->


    <!-- ======= Footer ======= -->
    <footer id="footer" class="footer" style="height: 106.5px;">
    </footer><!-- End Footer -->

    <a href="#" class="back-to-top d-flex align-items-center justify-content-center"><i class="bi bi-arrow-up-short"></i></a>
    <div id="preloader"></div>

    <!-- Vendor JS Files -->
    <script src="assets/vendor/aos/aos.js"></script>
    <script src="assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
    <script src="assets/vendor/glightbox/js/glightbox.min.js"></script>
    <script src="assets/vendor/jquery/jquery.min.js"></script>
    <script src="assets/vendor/jquery-sticky/jquery.sticky.js"></script>
    <script src="assets/vendor/jquery.easing/jquery.easing.min.js"></script>

    <!-- Main JS File -->
    <script src="assets/js/main.js"></script>
    <script>
        $( "#header" ).load( "data/navbar.html" );

        let params = (new URL(document.location)).searchParams;
        let DM = params.get('DM');
        if (DM == 'true') {
            $('.nav-link:hidden').attr('hidden', false);
            for (let i = 0; i < $('a[href]').length; i++) {
                const x = $('a[href]')[i];
                $(x).attr("href", function(i, href) {
                    return href + '?DM=true';
                });
            };
        };
    </script>

    <!-- Card Details -->

    <script>
        var jsonRaces = (function () {
            var jsonRaces = null;
            $.ajax({
                'async': false,
                'global': false,
                'url': 'data/races.json',
                'dataType': "json",
                'success': function (data) {
                    jsonRaces = data;
                }
            });
            return jsonRaces;
        })();

        var jsonTerrains = (function () {
            var jsonTerrains = null;
            $.ajax({
                'async': false,
                'global': false,
                'url': 'data/race terrains.json',
                'dataType': "json",
                'success': function (data) {
                    jsonTerrains = data;
                }
            });
            return jsonTerrains;
        })();
    </script>

    <script>
        var firstTerrain = true;
        let race = params.get('race');
        for (let k = 0; k < jsonRaces.races.length; k++) {
            const x = jsonRaces.races[k];
            if (x.name == race) {
                var raceIndex = k;
                break
            }
        }

        $('.race-name').text(jsonRaces.races[raceIndex].name);
        for (let j = 0; j < Object.keys(jsonTerrains).length; j++) {
            const terrain = Object.keys(jsonTerrains)[j];
            if (terrain != '*' && jsonTerrains[terrain].includes(jsonRaces.races[raceIndex].name)) {
                if (firstTerrain == true) {
                    $('h2.race-name').append('; ' + terrain);
                    firstTerrain = false;
                }
                else {
                    $('h2.race-name').append(', ' + terrain);
                };
            };
        };

        $('.row').html(jsonRaces.races[raceIndex].data)

        $('thead tr th').addClass('col-md-2')


        
        for (let i = 0; i < $('.collapse').length; i++) {
            const x = $('.collapse')[i];
            $(x).attr('id', 'subrace-' + i).addClass('overflow-hidden');
        };

        for (let i = 0; i < $('h3').length; i++) {
            const x = $('h3')[i];
            $(x).addClass('mb-0')

            $(x).on('click', function () {
                for (let j = 0; j < $('h3').length; j++) {
                    if ( j != i ) {
                        $('#subrace-' + j).collapse('hide')
                    }
                    else {
                        $('#subrace-' + j).collapse('toggle')
                    };
                };
            });
        };
    </script>

</body>

</html>